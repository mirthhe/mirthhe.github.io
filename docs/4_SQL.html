<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 SQL and relational data | bookdown_site.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.32 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 SQL and relational data | bookdown_site.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 SQL and relational data | bookdown_site.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="3_3D_visualizations.html"/>
<link rel="next" href="5_package_portrobbo.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<script src="libs/r3dmol-1.6.2/3Dmol-nojquery-min.js"></script>
<script src="libs/r3dmol-binding-0.1.2/r3dmol.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="trial.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><h3 class=".paddingtitel ">Portfolio of Mirthe Klaassen</h3></li>
<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Curriculum Vitae</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contact"><i class="fa fa-check"></i>Contact</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#profile"><i class="fa fa-check"></i>Profile</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#job-experience"><i class="fa fa-check"></i>Job experience</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#education"><i class="fa fa-check"></i>Education</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#skills"><i class="fa fa-check"></i>Skills</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#volunteering"><i class="fa fa-check"></i>Volunteering</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#languages"><i class="fa fa-check"></i>Languages</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="1_CurrentProjects.html"><a href="1_CurrentProjects.html"><i class="fa fa-check"></i><b>1</b> Current work</a>
<ul>
<li class="chapter" data-level="1.1" data-path="1_CurrentProjects.html"><a href="1_CurrentProjects.html#technology-to-reduce-animaltesting"><i class="fa fa-check"></i><b>1.1</b> Technology to reduce animaltesting</a></li>
<li class="chapter" data-level="1.2" data-path="1_CurrentProjects.html"><a href="1_CurrentProjects.html#ontox"><i class="fa fa-check"></i><b>1.2</b> ONTOX</a></li>
<li class="chapter" data-level="1.3" data-path="1_CurrentProjects.html"><a href="1_CurrentProjects.html#progress"><i class="fa fa-check"></i><b>1.3</b> Progress</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2_SBtab.html"><a href="2_SBtab.html"><i class="fa fa-check"></i><b>2</b> SBtab merging</a></li>
<li class="chapter" data-level="3" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html"><i class="fa fa-check"></i><b>3</b> Protein structures in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#protein-structure-data"><i class="fa fa-check"></i><b>3.1</b> Protein structure data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#protein-data-bank-archive"><i class="fa fa-check"></i><b>3.1.1</b> Protein Data Bank Archive</a></li>
<li class="chapter" data-level="3.1.2" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#pdbxmmcif-format"><i class="fa fa-check"></i><b>3.1.2</b> PDBx/MMcif format</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#visualization-methods"><i class="fa fa-check"></i><b>3.2</b> Visualization methods</a></li>
<li class="chapter" data-level="3.3" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#applying-in-r"><i class="fa fa-check"></i><b>3.3</b> Applying in R</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#cartoon-visual"><i class="fa fa-check"></i><b>3.3.1</b> Cartoon visual</a></li>
<li class="chapter" data-level="3.3.2" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#sphere-and-sticks-visual"><i class="fa fa-check"></i><b>3.3.2</b> Sphere and sticks visual</a></li>
<li class="chapter" data-level="3.3.3" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#combining-styles"><i class="fa fa-check"></i><b>3.3.3</b> Combining styles</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3_3D_visualizations.html"><a href="3_3D_visualizations.html#looking-forward"><i class="fa fa-check"></i><b>3.4</b> Looking forward</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4_SQL.html"><a href="4_SQL.html"><i class="fa fa-check"></i><b>4</b> SQL and relational data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="4_SQL.html"><a href="4_SQL.html#connecting-to-dbeaver"><i class="fa fa-check"></i><b>4.1</b> Connecting to DBeaver</a></li>
<li class="chapter" data-level="4.2" data-path="4_SQL.html"><a href="4_SQL.html#data-inspection"><i class="fa fa-check"></i><b>4.2</b> Data inspection</a></li>
<li class="chapter" data-level="4.3" data-path="4_SQL.html"><a href="4_SQL.html#joining-datasets"><i class="fa fa-check"></i><b>4.3</b> Joining datasets</a></li>
<li class="chapter" data-level="4.4" data-path="4_SQL.html"><a href="4_SQL.html#descriptive-statistics"><i class="fa fa-check"></i><b>4.4</b> Descriptive statistics</a></li>
<li class="chapter" data-level="4.5" data-path="4_SQL.html"><a href="4_SQL.html#visualizations"><i class="fa fa-check"></i><b>4.5</b> Visualizations</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="4_SQL.html"><a href="4_SQL.html#dengue-cases"><i class="fa fa-check"></i><b>4.5.1</b> Dengue cases</a></li>
<li class="chapter" data-level="4.5.2" data-path="4_SQL.html"><a href="4_SQL.html#flu-cases"><i class="fa fa-check"></i><b>4.5.2</b> Flu cases</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html"><i class="fa fa-check"></i><b>5</b> R package</a>
<ul>
<li class="chapter" data-level="5.1" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#the-demo"><i class="fa fa-check"></i><b>5.1</b> The Demo</a></li>
<li class="chapter" data-level="5.2" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#rmarkdown-driven-development"><i class="fa fa-check"></i><b>5.2</b> RMarkdown driven development</a></li>
<li class="chapter" data-level="5.3" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#package-portrobbo"><i class="fa fa-check"></i><b>5.3</b> Package “portrobbo”</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#picking-a-name"><i class="fa fa-check"></i><b>5.3.1</b> Picking a name</a></li>
<li class="chapter" data-level="5.3.2" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#an-overview"><i class="fa fa-check"></i><b>5.3.2</b> An overview</a></li>
<li class="chapter" data-level="5.3.3" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#uniq_val"><i class="fa fa-check"></i><b>5.3.3</b> uniq_val</a></li>
<li class="chapter" data-level="5.3.4" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#save_csv_rds"><i class="fa fa-check"></i><b>5.3.4</b> save_csv_rds</a></li>
<li class="chapter" data-level="5.3.5" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#graph_jitter"><i class="fa fa-check"></i><b>5.3.5</b> graph_jitter</a></li>
<li class="chapter" data-level="5.3.6" data-path="5_package_portrobbo.html"><a href="5_package_portrobbo.html#protein-visualization-functions"><i class="fa fa-check"></i><b>5.3.6</b> Protein visualization functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html"><i class="fa fa-check"></i><b>6</b> Reproducible Research</a>
<ul>
<li class="chapter" data-level="6.1" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#excels-downsides"><i class="fa fa-check"></i><b>6.1</b> Excel’s downsides</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#inspecting-an-excel-file"><i class="fa fa-check"></i><b>6.1.1</b> Inspecting an Excel file</a></li>
<li class="chapter" data-level="6.1.2" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#creating-the-scatterplot"><i class="fa fa-check"></i><b>6.1.2</b> Creating the scatterplot</a></li>
<li class="chapter" data-level="6.1.3" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#normalize-for-the-negative-control"><i class="fa fa-check"></i><b>6.1.3</b> Normalize for the negative control</a></li>
<li class="chapter" data-level="6.1.4" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#statistical-analysis"><i class="fa fa-check"></i><b>6.1.4</b> Statistical analysis</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#repita-criteria"><i class="fa fa-check"></i><b>6.2</b> Repita criteria</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#criteria-for-reproducibility"><i class="fa fa-check"></i><b>6.2.1</b> Criteria for reproducibility</a></li>
<li class="chapter" data-level="6.2.2" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#the-article"><i class="fa fa-check"></i><b>6.2.2</b> The article</a></li>
<li class="chapter" data-level="6.2.3" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#the-reproducibility"><i class="fa fa-check"></i><b>6.2.3</b> The reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#open-source-code"><i class="fa fa-check"></i><b>6.3</b> Open source code</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#the-article-1"><i class="fa fa-check"></i><b>6.3.1</b> The article</a></li>
<li class="chapter" data-level="6.3.2" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#the-code"><i class="fa fa-check"></i><b>6.3.2</b> The code</a></li>
<li class="chapter" data-level="6.3.3" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#excuting-the-code"><i class="fa fa-check"></i><b>6.3.3</b> Excuting the code</a></li>
<li class="chapter" data-level="6.3.4" data-path="6_Reproducibility.html"><a href="6_Reproducibility.html#effort-scoring"><i class="fa fa-check"></i><b>6.3.4</b> Effort scoring</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7_parameters.html"><a href="7_parameters.html"><i class="fa fa-check"></i><b>7</b> Parameters</a>
<ul>
<li class="chapter" data-level="7.1" data-path="7_parameters.html"><a href="7_parameters.html#inspecting-the-data"><i class="fa fa-check"></i><b>7.1</b> Inspecting the data</a></li>
<li class="chapter" data-level="7.2" data-path="7_parameters.html"><a href="7_parameters.html#creating-the-graphs"><i class="fa fa-check"></i><b>7.2</b> Creating the graphs</a></li>
<li class="chapter" data-level="7.3" data-path="7_parameters.html"><a href="7_parameters.html#checking-parameters"><i class="fa fa-check"></i><b>7.3</b> Checking parameters</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8_References.html"><a href="8_References.html"><i class="fa fa-check"></i><b>8</b> References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="relational" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> SQL and relational data</h1>
<p><em>As part of assignment 7 from the <a href="https://lesmaterialen.rstudio.hu.nl/workflows-reader/relationaldb.html">DSFB2 Workflows course</a>.</em></p>
<hr />
<p>So far the subjects have been about a couple different things, like R, BASH, HTML and CSS. Another important language to understand is SQL. With this assignment the focus is on learning the basics of SQL and applying it to relational data. To start, the dataframes will be created, using the files provided in the assignment, and tidied up.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="4_SQL.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import flu data ----</span></span>
<span id="cb9-2"><a href="4_SQL.html#cb9-2" aria-hidden="true" tabindex="-1"></a>flu_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data-raw/relationaldata/flu_data.csv&quot;</span>, <span class="at">skip=</span><span class="dv">11</span>) <span class="do">## First 11 rows are metadata</span></span>
<span id="cb9-3"><a href="4_SQL.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Make flu dataframe tidy ----</span></span>
<span id="cb9-4"><a href="4_SQL.html#cb9-4" aria-hidden="true" tabindex="-1"></a>flu_df_tidy <span class="ot">&lt;-</span> flu_df <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(flu_df)), </span>
<span id="cb9-5"><a href="4_SQL.html#cb9-5" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">names_to =</span> <span class="st">&#39;country&#39;</span>, </span>
<span id="cb9-6"><a href="4_SQL.html#cb9-6" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">values_to =</span> <span class="st">&#39;cases&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb9-7"><a href="4_SQL.html#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="4_SQL.html#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Import dengue data ----</span></span>
<span id="cb9-9"><a href="4_SQL.html#cb9-9" aria-hidden="true" tabindex="-1"></a>dengue_df <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data-raw/relationaldata/dengue_data.csv&quot;</span>, <span class="at">skip=</span><span class="dv">11</span>) <span class="do">## First 11 rows are metadata</span></span>
<span id="cb9-10"><a href="4_SQL.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Make dengue data tidy ----</span></span>
<span id="cb9-11"><a href="4_SQL.html#cb9-11" aria-hidden="true" tabindex="-1"></a>dengue_df_tidy <span class="ot">&lt;-</span> dengue_df <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(dengue_df)),</span>
<span id="cb9-12"><a href="4_SQL.html#cb9-12" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">names_to =</span> <span class="st">&#39;country&#39;</span>, </span>
<span id="cb9-13"><a href="4_SQL.html#cb9-13" aria-hidden="true" tabindex="-1"></a>                                             <span class="at">values_to =</span> <span class="st">&#39;cases&#39;</span>) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb9-14"><a href="4_SQL.html#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="4_SQL.html#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Gapminder data ----</span></span>
<span id="cb9-16"><a href="4_SQL.html#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="do">## The third dataframe is the gapminder dataframe from the dslabs package</span></span>
<span id="cb9-17"><a href="4_SQL.html#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="do">## This dataframe is already tidy</span></span></code></pre></div>
<p>To make the data more relational a couple things have to be changed. The columns describing the countries and dates should be comparable across the different dataframes so they can be joined later. This was achieved with the following code.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="4_SQL.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Change country column ----</span></span>
<span id="cb10-2"><a href="4_SQL.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="do">## All &#39;country&#39; columns should be the same in type, class and values</span></span>
<span id="cb10-3"><a href="4_SQL.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="do">## For flu and dengue they&#39;re characters, for gapminder it&#39;s a factor</span></span>
<span id="cb10-4"><a href="4_SQL.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Turning the &#39;country&#39; column of both dengue and flu into a factor</span></span>
<span id="cb10-5"><a href="4_SQL.html#cb10-5" aria-hidden="true" tabindex="-1"></a>flu_df_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_df_tidy<span class="sc">$</span>country)</span>
<span id="cb10-6"><a href="4_SQL.html#cb10-6" aria-hidden="true" tabindex="-1"></a>dengue_df_tidy<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_df_tidy<span class="sc">$</span>country)</span>
<span id="cb10-7"><a href="4_SQL.html#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="4_SQL.html#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Change date column ----</span></span>
<span id="cb10-9"><a href="4_SQL.html#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="do">## All &#39;date&#39; columns should be the same in type, class and values</span></span>
<span id="cb10-10"><a href="4_SQL.html#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="do">## For flu and dengue the dates are specified to the day instead of the year</span></span>
<span id="cb10-11"><a href="4_SQL.html#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="do">## We&#39;ll create a new &#39;year&#39; column for both which matches the column of gapminder</span></span>
<span id="cb10-12"><a href="4_SQL.html#cb10-12" aria-hidden="true" tabindex="-1"></a>flu_df_tidy <span class="ot">&lt;-</span> flu_df_tidy <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">substr</span>(flu_df_tidy<span class="sc">$</span>Date, </span>
<span id="cb10-13"><a href="4_SQL.html#cb10-13" aria-hidden="true" tabindex="-1"></a>                                                    <span class="at">start=</span><span class="dv">1</span>, <span class="at">stop=</span><span class="dv">4</span>))</span>
<span id="cb10-14"><a href="4_SQL.html#cb10-14" aria-hidden="true" tabindex="-1"></a>dengue_df_tidy <span class="ot">&lt;-</span> dengue_df_tidy <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">substr</span>(dengue_df_tidy<span class="sc">$</span>Date,</span>
<span id="cb10-15"><a href="4_SQL.html#cb10-15" aria-hidden="true" tabindex="-1"></a>                                                          <span class="at">start=</span><span class="dv">1</span>, <span class="at">stop=</span><span class="dv">4</span>))</span>
<span id="cb10-16"><a href="4_SQL.html#cb10-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-17"><a href="4_SQL.html#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Make them integers ----</span></span>
<span id="cb10-18"><a href="4_SQL.html#cb10-18" aria-hidden="true" tabindex="-1"></a><span class="do">## Now they&#39;re characters, they should be integers</span></span>
<span id="cb10-19"><a href="4_SQL.html#cb10-19" aria-hidden="true" tabindex="-1"></a>flu_df_tidy<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(flu_df_tidy<span class="sc">$</span>year)</span>
<span id="cb10-20"><a href="4_SQL.html#cb10-20" aria-hidden="true" tabindex="-1"></a>dengue_df_tidy<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dengue_df_tidy<span class="sc">$</span>year)</span></code></pre></div>
<p>The dataframes were also exported to .csv and .rds for later use.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="4_SQL.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save_csv_rds</span>(flu_df_tidy, <span class="st">&quot;data/relationaldata/flu&quot;</span>)</span>
<span id="cb11-2"><a href="4_SQL.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save_csv_rds</span>(dengue_df_tidy, <span class="st">&quot;data/relationaldata/dengue&quot;</span>)</span>
<span id="cb11-3"><a href="4_SQL.html#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">save_csv_rds</span>(gapminder, <span class="st">&quot;data/relationaldata/gapminder&quot;</span>)</span></code></pre></div>
<hr />
<div id="connecting-to-dbeaver" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Connecting to DBeaver</h2>
<p>To move from R to SQL (PostgreSQL) a database has been created in DBeaver called ‘workflowsdb’. The three R dataframes were imported into the database using RPostgreSQL. The tables were inserted into the hierarchy of this database as shown in figure 4.1.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="4_SQL.html#cb12-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(), </span>
<span id="cb12-2"><a href="4_SQL.html#cb12-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>, </span>
<span id="cb12-3"><a href="4_SQL.html#cb12-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>, </span>
<span id="cb12-4"><a href="4_SQL.html#cb12-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>, </span>
<span id="cb12-5"><a href="4_SQL.html#cb12-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>, </span>
<span id="cb12-6"><a href="4_SQL.html#cb12-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span><span class="st">&quot;insertpassword&quot;</span>) </span>
<span id="cb12-7"><a href="4_SQL.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Password changed after connecting for privacy reasons</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="4_SQL.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the DBI library</span></span>
<span id="cb13-2"><a href="4_SQL.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder&quot;</span>, gapminder)</span>
<span id="cb13-3"><a href="4_SQL.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu&quot;</span>, flu_df_tidy)</span>
<span id="cb13-4"><a href="4_SQL.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue&quot;</span>, dengue_df_tidy)</span></code></pre></div>
<div class="figure">
<img src="images/sql_tree.png" alt="" />
<p class="caption"><em>Figure 4.1. The hierarchy of the workflowsdb database including the three tables.</em></p>
</div>
<hr />
</div>
<div id="data-inspection" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Data inspection</h2>
<p>The data was inspected using the SQL editor. A script was created for the inspection of the <a href="SQL/gapminder_inspection.sql">gapminder</a>, <a href="SQL/flu_inspection.sql">flu</a> and <a href="SQL/dengue_inspection.sql">dengue</a> data. R can also be used for the same inspections as shown below.</p>
<details>
<summary>
<i>SQL script Gapminder</i>
</summary>
<div class="sourceCode" id="cb14"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb14-1"><a href="4_SQL.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checking the columnnames and types</span></span>
<span id="cb14-2"><a href="4_SQL.html#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb14-3"><a href="4_SQL.html#cb14-3" aria-hidden="true" tabindex="-1"></a>    column_name, data_type </span>
<span id="cb14-4"><a href="4_SQL.html#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb14-5"><a href="4_SQL.html#cb14-5" aria-hidden="true" tabindex="-1"></a>    information_schema.<span class="kw">columns</span></span>
<span id="cb14-6"><a href="4_SQL.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="kw">where</span></span>
<span id="cb14-7"><a href="4_SQL.html#cb14-7" aria-hidden="true" tabindex="-1"></a>    table_schema <span class="op">=</span> <span class="st">&#39;public&#39;</span></span>
<span id="cb14-8"><a href="4_SQL.html#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">and</span> table_name <span class="op">=</span> <span class="st">&#39;gapminder&#39;</span>;</span>
<span id="cb14-9"><a href="4_SQL.html#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="4_SQL.html#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checking the timeframe in which the data has been collected</span></span>
<span id="cb14-11"><a href="4_SQL.html#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb14-12"><a href="4_SQL.html#cb14-12" aria-hidden="true" tabindex="-1"></a>   <span class="kw">distinct</span> <span class="dt">year</span></span>
<span id="cb14-13"><a href="4_SQL.html#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb14-14"><a href="4_SQL.html#cb14-14" aria-hidden="true" tabindex="-1"></a>   gapminder</span>
<span id="cb14-15"><a href="4_SQL.html#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span></span>
<span id="cb14-16"><a href="4_SQL.html#cb14-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">year</span> <span class="kw">desc</span>;</span>
<span id="cb14-17"><a href="4_SQL.html#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">-- from 1960 to 2016</span></span>
<span id="cb14-18"><a href="4_SQL.html#cb14-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-19"><a href="4_SQL.html#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checking the countries with the highest and lowest average population</span></span>
<span id="cb14-20"><a href="4_SQL.html#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb14-21"><a href="4_SQL.html#cb14-21" aria-hidden="true" tabindex="-1"></a>    country,</span>
<span id="cb14-22"><a href="4_SQL.html#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">AVG</span> (population):: <span class="dt">NUMERIC</span>(<span class="dv">11</span>,<span class="dv">0</span>)</span>
<span id="cb14-23"><a href="4_SQL.html#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span> </span>
<span id="cb14-24"><a href="4_SQL.html#cb14-24" aria-hidden="true" tabindex="-1"></a>    gapminder </span>
<span id="cb14-25"><a href="4_SQL.html#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="kw">group</span> <span class="kw">by</span></span>
<span id="cb14-26"><a href="4_SQL.html#cb14-26" aria-hidden="true" tabindex="-1"></a>    country</span>
<span id="cb14-27"><a href="4_SQL.html#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span> </span>
<span id="cb14-28"><a href="4_SQL.html#cb14-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">avg</span> <span class="kw">desc</span>; </span>
<span id="cb14-29"><a href="4_SQL.html#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">-- China has the highest with around 1,000,000,000</span></span>
<span id="cb14-30"><a href="4_SQL.html#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">-- Greenland the lowest with around 51,000  </span></span>
<span id="cb14-31"><a href="4_SQL.html#cb14-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-32"><a href="4_SQL.html#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checking the countries with the highest and lowest average life expectancy</span></span>
<span id="cb14-33"><a href="4_SQL.html#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb14-34"><a href="4_SQL.html#cb14-34" aria-hidden="true" tabindex="-1"></a>    country,</span>
<span id="cb14-35"><a href="4_SQL.html#cb14-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">AVG</span> (life_expectancy):: <span class="dt">NUMERIC</span>(<span class="dv">6</span>,<span class="dv">2</span>)</span>
<span id="cb14-36"><a href="4_SQL.html#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb14-37"><a href="4_SQL.html#cb14-37" aria-hidden="true" tabindex="-1"></a>    gapminder</span>
<span id="cb14-38"><a href="4_SQL.html#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="kw">where</span> life_expectancy <span class="kw">is</span> <span class="kw">not</span> <span class="kw">null</span></span>
<span id="cb14-39"><a href="4_SQL.html#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="kw">group</span> <span class="kw">by</span></span>
<span id="cb14-40"><a href="4_SQL.html#cb14-40" aria-hidden="true" tabindex="-1"></a>    country</span>
<span id="cb14-41"><a href="4_SQL.html#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span> </span>
<span id="cb14-42"><a href="4_SQL.html#cb14-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">avg</span> <span class="kw">desc</span>;</span>
<span id="cb14-43"><a href="4_SQL.html#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co">-- Iceland has the highest with 78.17</span></span>
<span id="cb14-44"><a href="4_SQL.html#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co">-- Central Africa Republic the lowest with 46.31</span></span>
<span id="cb14-45"><a href="4_SQL.html#cb14-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-46"><a href="4_SQL.html#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checking how many countries are noted in the data</span></span>
<span id="cb14-47"><a href="4_SQL.html#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb14-48"><a href="4_SQL.html#cb14-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">count</span>(<span class="kw">distinct</span> country)</span>
<span id="cb14-49"><a href="4_SQL.html#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span> gapminder; </span>
<span id="cb14-50"><a href="4_SQL.html#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="co">-- 185 different countries</span></span></code></pre></div>
</details>
<details>
<summary>
<i>SQL script flu data inspection</i>
</summary>
<div class="sourceCode" id="cb15"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="4_SQL.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- First we check the columnnames and types</span></span>
<span id="cb15-2"><a href="4_SQL.html#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb15-3"><a href="4_SQL.html#cb15-3" aria-hidden="true" tabindex="-1"></a>    column_name, data_type </span>
<span id="cb15-4"><a href="4_SQL.html#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb15-5"><a href="4_SQL.html#cb15-5" aria-hidden="true" tabindex="-1"></a>    information_schema.<span class="kw">columns</span></span>
<span id="cb15-6"><a href="4_SQL.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">where</span> </span>
<span id="cb15-7"><a href="4_SQL.html#cb15-7" aria-hidden="true" tabindex="-1"></a>    table_schema <span class="op">=</span> <span class="st">&#39;public&#39;</span></span>
<span id="cb15-8"><a href="4_SQL.html#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">and</span> table_name <span class="op">=</span> <span class="st">&#39;flu&#39;</span>;</span>
<span id="cb15-9"><a href="4_SQL.html#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="4_SQL.html#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- We check in which timeframe the data has been collected</span></span>
<span id="cb15-11"><a href="4_SQL.html#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb15-12"><a href="4_SQL.html#cb15-12" aria-hidden="true" tabindex="-1"></a>   <span class="kw">distinct</span> <span class="dt">year</span></span>
<span id="cb15-13"><a href="4_SQL.html#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb15-14"><a href="4_SQL.html#cb15-14" aria-hidden="true" tabindex="-1"></a>   flu</span>
<span id="cb15-15"><a href="4_SQL.html#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span></span>
<span id="cb15-16"><a href="4_SQL.html#cb15-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">year</span> <span class="kw">desc</span>; </span>
<span id="cb15-17"><a href="4_SQL.html#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">-- from 2002 to 2015</span></span>
<span id="cb15-18"><a href="4_SQL.html#cb15-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-19"><a href="4_SQL.html#cb15-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">AVG</span> (cases):: <span class="dt">NUMERIC</span>(<span class="dv">6</span>,<span class="dv">1</span>)</span>
<span id="cb15-20"><a href="4_SQL.html#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb15-21"><a href="4_SQL.html#cb15-21" aria-hidden="true" tabindex="-1"></a>    flu</span>
<span id="cb15-22"><a href="4_SQL.html#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="kw">group</span> <span class="kw">by</span></span>
<span id="cb15-23"><a href="4_SQL.html#cb15-23" aria-hidden="true" tabindex="-1"></a>    country</span>
<span id="cb15-24"><a href="4_SQL.html#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span> </span>
<span id="cb15-25"><a href="4_SQL.html#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">avg</span> <span class="kw">desc</span>;</span>
<span id="cb15-26"><a href="4_SQL.html#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co">-- South Africa had the most with 2698.8 on average</span></span>
<span id="cb15-27"><a href="4_SQL.html#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co">-- Sweden the least 5.5</span></span>
<span id="cb15-28"><a href="4_SQL.html#cb15-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-29"><a href="4_SQL.html#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">-- We check how many countries are noted in the data and if they are spelled correctly</span></span>
<span id="cb15-30"><a href="4_SQL.html#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb15-31"><a href="4_SQL.html#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">distinct</span> country</span>
<span id="cb15-32"><a href="4_SQL.html#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span> flu; </span>
<span id="cb15-33"><a href="4_SQL.html#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co">-- 29 different countries, all spelled correctly</span></span></code></pre></div>
</details>
<details>
<summary>
<i>SQL script dengue data inspection</i>
</summary>
<div class="sourceCode" id="cb16"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a href="4_SQL.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- First we check the columnnames and types</span></span>
<span id="cb16-2"><a href="4_SQL.html#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb16-3"><a href="4_SQL.html#cb16-3" aria-hidden="true" tabindex="-1"></a>    column_name, data_type </span>
<span id="cb16-4"><a href="4_SQL.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb16-5"><a href="4_SQL.html#cb16-5" aria-hidden="true" tabindex="-1"></a>    information_schema.<span class="kw">columns</span></span>
<span id="cb16-6"><a href="4_SQL.html#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="kw">where</span> </span>
<span id="cb16-7"><a href="4_SQL.html#cb16-7" aria-hidden="true" tabindex="-1"></a>    table_schema <span class="op">=</span> <span class="st">&#39;public&#39;</span></span>
<span id="cb16-8"><a href="4_SQL.html#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">and</span> table_name <span class="op">=</span> <span class="st">&#39;dengue&#39;</span>;</span>
<span id="cb16-9"><a href="4_SQL.html#cb16-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-10"><a href="4_SQL.html#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- We check in which timeframe the data has been collected</span></span>
<span id="cb16-11"><a href="4_SQL.html#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb16-12"><a href="4_SQL.html#cb16-12" aria-hidden="true" tabindex="-1"></a>   <span class="kw">distinct</span> <span class="dt">year</span></span>
<span id="cb16-13"><a href="4_SQL.html#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb16-14"><a href="4_SQL.html#cb16-14" aria-hidden="true" tabindex="-1"></a>   dengue</span>
<span id="cb16-15"><a href="4_SQL.html#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span></span>
<span id="cb16-16"><a href="4_SQL.html#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">year</span> <span class="kw">desc</span>;</span>
<span id="cb16-17"><a href="4_SQL.html#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="co">-- from 2002 to 2015</span></span>
<span id="cb16-18"><a href="4_SQL.html#cb16-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-19"><a href="4_SQL.html#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="co">-- We check which countries had the most and least dengue cases on average over this timeframe</span></span>
<span id="cb16-20"><a href="4_SQL.html#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span> </span>
<span id="cb16-21"><a href="4_SQL.html#cb16-21" aria-hidden="true" tabindex="-1"></a>    country,</span>
<span id="cb16-22"><a href="4_SQL.html#cb16-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">AVG</span> (cases):: <span class="dt">NUMERIC</span>(<span class="dv">6</span>,<span class="dv">4</span>)</span>
<span id="cb16-23"><a href="4_SQL.html#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span></span>
<span id="cb16-24"><a href="4_SQL.html#cb16-24" aria-hidden="true" tabindex="-1"></a>    dengue</span>
<span id="cb16-25"><a href="4_SQL.html#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="kw">group</span> <span class="kw">by</span></span>
<span id="cb16-26"><a href="4_SQL.html#cb16-26" aria-hidden="true" tabindex="-1"></a>    country</span>
<span id="cb16-27"><a href="4_SQL.html#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> <span class="kw">by</span> </span>
<span id="cb16-28"><a href="4_SQL.html#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">avg</span> <span class="kw">desc</span>;</span>
<span id="cb16-29"><a href="4_SQL.html#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="co">-- Venezuela had the most with 0.2774 on average</span></span>
<span id="cb16-30"><a href="4_SQL.html#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="co">-- Bolivia the least with 0.0447</span></span>
<span id="cb16-31"><a href="4_SQL.html#cb16-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-32"><a href="4_SQL.html#cb16-32" aria-hidden="true" tabindex="-1"></a><span class="co">-- We check how many countries are noted in the data and if they are spelled correctly</span></span>
<span id="cb16-33"><a href="4_SQL.html#cb16-33" aria-hidden="true" tabindex="-1"></a><span class="kw">select</span></span>
<span id="cb16-34"><a href="4_SQL.html#cb16-34" aria-hidden="true" tabindex="-1"></a>    <span class="kw">distinct</span> country</span>
<span id="cb16-35"><a href="4_SQL.html#cb16-35" aria-hidden="true" tabindex="-1"></a><span class="kw">from</span> dengue;</span>
<span id="cb16-36"><a href="4_SQL.html#cb16-36" aria-hidden="true" tabindex="-1"></a><span class="co">-- 10 different countries, all spelled correctly</span></span></code></pre></div>
</details>
<details>
<summary>
<i>R script data inspection</i>
</summary>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="4_SQL.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the columnnames and types ----</span></span>
<span id="cb17-2"><a href="4_SQL.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gapminder_df)</span>
<span id="cb17-3"><a href="4_SQL.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flu_df_tidy)</span>
<span id="cb17-4"><a href="4_SQL.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dengue_df_tidy)</span>
<span id="cb17-5"><a href="4_SQL.html#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="4_SQL.html#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Check the timeframes ----</span></span>
<span id="cb17-7"><a href="4_SQL.html#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;From&quot;</span>, <span class="fu">min</span>(<span class="fu">unique</span>(gapminder_df<span class="sc">$</span>year)), <span class="st">&quot;to&quot;</span>, <span class="fu">max</span>(<span class="fu">unique</span>(gapminder_df<span class="sc">$</span>year)))</span>
<span id="cb17-8"><a href="4_SQL.html#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;From&quot;</span>, <span class="fu">min</span>(<span class="fu">unique</span>(flu_df_tidy<span class="sc">$</span>year)), <span class="st">&quot;to&quot;</span>, <span class="fu">max</span>(<span class="fu">unique</span>(flu_df_tidy<span class="sc">$</span>year)))</span>
<span id="cb17-9"><a href="4_SQL.html#cb17-9" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&quot;From&quot;</span>, <span class="fu">min</span>(<span class="fu">unique</span>(dengue_df_tidy<span class="sc">$</span>year)), <span class="st">&quot;to&quot;</span>, <span class="fu">max</span>(<span class="fu">unique</span>(dengue_df_tidy<span class="sc">$</span>year)))</span>
<span id="cb17-10"><a href="4_SQL.html#cb17-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-11"><a href="4_SQL.html#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect gapminder ----</span></span>
<span id="cb17-12"><a href="4_SQL.html#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="do">## Checking the highest and lowest average population in the gapminder data</span></span>
<span id="cb17-13"><a href="4_SQL.html#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span>
<span id="cb17-14"><a href="4_SQL.html#cb17-14" aria-hidden="true" tabindex="-1"></a>gapminder_pop <span class="ot">&lt;-</span> gapminder_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">average =</span> <span class="fu">mean</span>(population, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-15"><a href="4_SQL.html#cb17-15" aria-hidden="true" tabindex="-1"></a>gapminder_pop <span class="sc">%&gt;%</span> <span class="fu">filter</span>(average <span class="sc">==</span> <span class="fu">max</span>(gapminder_pop<span class="sc">$</span>average) <span class="sc">|</span> average <span class="sc">==</span> <span class="fu">min</span>(gapminder_pop<span class="sc">$</span>average))</span>
<span id="cb17-16"><a href="4_SQL.html#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="4_SQL.html#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="do">## Checking the highest and lowest average life expectancy in the gapminder data</span></span>
<span id="cb17-18"><a href="4_SQL.html#cb17-18" aria-hidden="true" tabindex="-1"></a>gapminder_life <span class="ot">&lt;-</span> gapminder_df <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">average =</span> <span class="fu">mean</span>(life_expectancy, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-19"><a href="4_SQL.html#cb17-19" aria-hidden="true" tabindex="-1"></a>gapminder_life <span class="sc">%&gt;%</span> <span class="fu">filter</span>(average <span class="sc">==</span> <span class="fu">max</span>(gapminder_life<span class="sc">$</span>average) <span class="sc">|</span> average <span class="sc">==</span> <span class="fu">min</span>(gapminder_life<span class="sc">$</span>average)) </span>
<span id="cb17-20"><a href="4_SQL.html#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="4_SQL.html#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect flu ----</span></span>
<span id="cb17-22"><a href="4_SQL.html#cb17-22" aria-hidden="true" tabindex="-1"></a><span class="do">## Checking the most and least average flu cases in the flu data</span></span>
<span id="cb17-23"><a href="4_SQL.html#cb17-23" aria-hidden="true" tabindex="-1"></a>flu_cases <span class="ot">&lt;-</span> flu_df_tidy <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">average =</span> <span class="fu">mean</span>(cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-24"><a href="4_SQL.html#cb17-24" aria-hidden="true" tabindex="-1"></a>flu_cases <span class="sc">%&gt;%</span> <span class="fu">filter</span>(average <span class="sc">==</span> <span class="fu">max</span>(flu_cases<span class="sc">$</span>average) <span class="sc">|</span> average <span class="sc">==</span> <span class="fu">min</span>(flu_cases<span class="sc">$</span>average))</span>
<span id="cb17-25"><a href="4_SQL.html#cb17-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-26"><a href="4_SQL.html#cb17-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect dengue ----</span></span>
<span id="cb17-27"><a href="4_SQL.html#cb17-27" aria-hidden="true" tabindex="-1"></a><span class="do">## Checking the most and least average dengue cases in the dengue data</span></span>
<span id="cb17-28"><a href="4_SQL.html#cb17-28" aria-hidden="true" tabindex="-1"></a>dengue_cases <span class="ot">&lt;-</span> dengue_df_tidy <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">average =</span> <span class="fu">mean</span>(cases, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb17-29"><a href="4_SQL.html#cb17-29" aria-hidden="true" tabindex="-1"></a>dengue_cases <span class="sc">%&gt;%</span> <span class="fu">filter</span>(average <span class="sc">==</span> <span class="fu">max</span>(dengue_cases<span class="sc">$</span>average) <span class="sc">|</span> average <span class="sc">==</span> <span class="fu">min</span>(dengue_cases<span class="sc">$</span>average)) </span>
<span id="cb17-30"><a href="4_SQL.html#cb17-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-31"><a href="4_SQL.html#cb17-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Check countries ----</span></span>
<span id="cb17-32"><a href="4_SQL.html#cb17-32" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(gapminder_df<span class="sc">$</span>country)) <span class="co"># 185 countries</span></span>
<span id="cb17-33"><a href="4_SQL.html#cb17-33" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(flu_df_tidy<span class="sc">$</span>country)) <span class="co"># 29 countries</span></span>
<span id="cb17-34"><a href="4_SQL.html#cb17-34" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(<span class="fu">unique</span>(dengue_df_tidy<span class="sc">$</span>country)) <span class="co"># 10 countries</span></span></code></pre></div>
</details>
<hr />
</div>
<div id="joining-datasets" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Joining datasets</h2>
<p>The three datasets have two variables in common, country and year. Both the flu and dengue datasets have multiple observations within the same year. Sadly, the flu and dengue databases are very unclear. Since the data is old and the links provided in the metadata are no longer working it is hard to estimate the details of this data. Per how many inhabitants are the cases? What were the criteria to be considered a case? Other factors, like the option to get a diagnosis within that region, should also be considered.</p>
<p>To combine the datasets the average amount of weekly cases per year per country was used. This was a better option than total average per year because not every country has data for every week of each year, therefore taking the sum would not be accurate. The dengue dataset incorporates the least amount of countries. When joining the data only the countries seen in all three datasets will be kept, these are Argentina, Bolivia, Brazil and Mexico. Therefore, joining the three datasets would waste a lot of data. Since dengue and flu will be looked at separately those two datasets will not be joined. Two joined tables have been made, one joining the flu and gapminder data and one joining the dengue and gapminder data.</p>
<p><a href="SQL/joining_gapminder_dengue.sql">Click here</a> for the full SQL script written to join the dengue and gapminder datasets based on country and year. <a href="SQL/joining_gapminder_flu.sql">This SQL script</a> was used to combine the flu and gapminder datasets, this time with a focus on continents instead of countries.</p>
<p>The joined tables were imported into R using the following code.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="4_SQL.html#cb18-1" aria-hidden="true" tabindex="-1"></a>gd_country <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/relationaldata/gapminder_dengue_country.csv&quot;</span>)</span>
<span id="cb18-2"><a href="4_SQL.html#cb18-2" aria-hidden="true" tabindex="-1"></a>gf_continent <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/relationaldata/gapminder_flu_continent.csv&quot;</span>)</span></code></pre></div>
<hr />
</div>
<div id="descriptive-statistics" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Descriptive statistics</h2>
<p>With these new joined tables we can perform some descriptive statistics. The cases have not been normalized for the population so it will be normalized to reflect the amount of cases per 100.000 inhabitants instead. Then the average amount of cases and standard deviation will be determined for each country/continent. After using the shapiro-wilk test both databases appeared to have at least a few non-normally distributed variables, 5 out of 10 for the dengue database and 3 out of 5 for the flu database. The Levene’s test showed that neither database had an equality of variance between countries/continents. Because of this (lack of normality <i>and</i> no equality of variance) the Kruskal-Wallis test was used to check for significant differences. Both databases brought back a p-value of .0000. The Dunn test was used as Post Hoc test to see where the statistically significant difference came from.</p>
<details>
<summary>
<i>The script used to find descriptive statistics</i>
</summary>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="4_SQL.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Normalize for population ----</span></span>
<span id="cb19-2"><a href="4_SQL.html#cb19-2" aria-hidden="true" tabindex="-1"></a>gd_norm_country <span class="ot">&lt;-</span> gd_country <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">cases_per_100000 =</span> </span>
<span id="cb19-3"><a href="4_SQL.html#cb19-3" aria-hidden="true" tabindex="-1"></a>                                           cases<span class="sc">/</span>population<span class="sc">*</span><span class="dv">100000</span>)</span>
<span id="cb19-4"><a href="4_SQL.html#cb19-4" aria-hidden="true" tabindex="-1"></a>gf_norm_continent <span class="ot">&lt;-</span> gf_continent <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">cases_per_100000 =</span> </span>
<span id="cb19-5"><a href="4_SQL.html#cb19-5" aria-hidden="true" tabindex="-1"></a>                                               cases<span class="sc">/</span>population<span class="sc">*</span><span class="dv">100000</span>)</span>
<span id="cb19-6"><a href="4_SQL.html#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="4_SQL.html#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean and stdev ----</span></span>
<span id="cb19-8"><a href="4_SQL.html#cb19-8" aria-hidden="true" tabindex="-1"></a>gd_summ <span class="ot">&lt;-</span> gd_norm_country <span class="sc">%&gt;%</span> </span>
<span id="cb19-9"><a href="4_SQL.html#cb19-9" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">group_by</span>(country)<span class="sc">%&gt;%</span> </span>
<span id="cb19-10"><a href="4_SQL.html#cb19-10" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">summarize</span>(<span class="at">avg_population =</span> <span class="fu">round</span>(<span class="fu">mean</span>(population), <span class="dv">0</span>),</span>
<span id="cb19-11"><a href="4_SQL.html#cb19-11" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sd_population =</span> <span class="fu">round</span>(<span class="fu">sd</span>(population), <span class="dv">0</span>),</span>
<span id="cb19-12"><a href="4_SQL.html#cb19-12" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">avg_cases_per_100000 =</span> <span class="fu">mean</span>(cases_per_100000),</span>
<span id="cb19-13"><a href="4_SQL.html#cb19-13" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sd_cases_per_100000 =</span> <span class="fu">sd</span>(cases_per_100000))</span>
<span id="cb19-14"><a href="4_SQL.html#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="4_SQL.html#cb19-15" aria-hidden="true" tabindex="-1"></a>gf_summ <span class="ot">&lt;-</span> gf_norm_continent <span class="sc">%&gt;%</span> </span>
<span id="cb19-16"><a href="4_SQL.html#cb19-16" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">group_by</span>(continent)<span class="sc">%&gt;%</span> </span>
<span id="cb19-17"><a href="4_SQL.html#cb19-17" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">summarize</span>(<span class="at">avg_population =</span> <span class="fu">round</span>(<span class="fu">mean</span>(population), <span class="dv">0</span>),</span>
<span id="cb19-18"><a href="4_SQL.html#cb19-18" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sd_population =</span> <span class="fu">round</span>(<span class="fu">sd</span>(population), <span class="dv">0</span>),</span>
<span id="cb19-19"><a href="4_SQL.html#cb19-19" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">avg_cases_per_100000 =</span> <span class="fu">mean</span>(cases_per_100000),</span>
<span id="cb19-20"><a href="4_SQL.html#cb19-20" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">sd_cases_per_100000 =</span> <span class="fu">sd</span>(cases_per_100000))</span>
<span id="cb19-21"><a href="4_SQL.html#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="4_SQL.html#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Check normality ----</span></span>
<span id="cb19-23"><a href="4_SQL.html#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="do">## To check the normality, dataframes are made with the countries/continents as columns</span></span>
<span id="cb19-24"><a href="4_SQL.html#cb19-24" aria-hidden="true" tabindex="-1"></a>dengue_country <span class="ot">&lt;-</span> gd_norm_country <span class="sc">%&gt;%</span> </span>
<span id="cb19-25"><a href="4_SQL.html#cb19-25" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(country, cases_per_100000, year) <span class="sc">%&gt;%</span> </span>
<span id="cb19-26"><a href="4_SQL.html#cb19-26" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> country, </span>
<span id="cb19-27"><a href="4_SQL.html#cb19-27" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">values_from =</span> cases_per_100000) <span class="sc">%&gt;%</span> </span>
<span id="cb19-28"><a href="4_SQL.html#cb19-28" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(year <span class="sc">!=</span> <span class="dv">2002</span>)</span>
<span id="cb19-29"><a href="4_SQL.html#cb19-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-30"><a href="4_SQL.html#cb19-30" aria-hidden="true" tabindex="-1"></a>flu_continent <span class="ot">&lt;-</span> gf_norm_continent <span class="sc">%&gt;%</span> </span>
<span id="cb19-31"><a href="4_SQL.html#cb19-31" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">select</span>(continent, cases_per_100000, year) <span class="sc">%&gt;%</span> </span>
<span id="cb19-32"><a href="4_SQL.html#cb19-32" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> continent, </span>
<span id="cb19-33"><a href="4_SQL.html#cb19-33" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">values_from =</span> cases_per_100000) <span class="sc">%&gt;%</span> </span>
<span id="cb19-34"><a href="4_SQL.html#cb19-34" aria-hidden="true" tabindex="-1"></a>                        <span class="fu">filter</span>(year <span class="sc">!=</span> <span class="dv">2002</span>)</span>
<span id="cb19-35"><a href="4_SQL.html#cb19-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-36"><a href="4_SQL.html#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="do">## Shapiro wilk for dengue</span></span>
<span id="cb19-37"><a href="4_SQL.html#cb19-37" aria-hidden="true" tabindex="-1"></a>stats_dengue_country <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">country =</span> <span class="fu">colnames</span>(dengue_country[,<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">colnames</span>(dengue_country))]),</span>
<span id="cb19-38"><a href="4_SQL.html#cb19-38" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">pvalue_shap =</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Venezuela)<span class="sc">$</span>p.value,</span>
<span id="cb19-39"><a href="4_SQL.html#cb19-39" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Thailand)<span class="sc">$</span>p.value,</span>
<span id="cb19-40"><a href="4_SQL.html#cb19-40" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Singapore)<span class="sc">$</span>p.value,</span>
<span id="cb19-41"><a href="4_SQL.html#cb19-41" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Philippines)<span class="sc">$</span>p.value,</span>
<span id="cb19-42"><a href="4_SQL.html#cb19-42" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Mexico)<span class="sc">$</span>p.value,</span>
<span id="cb19-43"><a href="4_SQL.html#cb19-43" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Indonesia)<span class="sc">$</span>p.value,</span>
<span id="cb19-44"><a href="4_SQL.html#cb19-44" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>India)<span class="sc">$</span>p.value,</span>
<span id="cb19-45"><a href="4_SQL.html#cb19-45" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Brazil)<span class="sc">$</span>p.value,</span>
<span id="cb19-46"><a href="4_SQL.html#cb19-46" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Bolivia)<span class="sc">$</span>p.value,</span>
<span id="cb19-47"><a href="4_SQL.html#cb19-47" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(dengue_country<span class="sc">$</span>Argentina)<span class="sc">$</span>p.value), <span class="dv">4</span>))</span>
<span id="cb19-48"><a href="4_SQL.html#cb19-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-49"><a href="4_SQL.html#cb19-49" aria-hidden="true" tabindex="-1"></a><span class="do">## Shapiro wilk for flu</span></span>
<span id="cb19-50"><a href="4_SQL.html#cb19-50" aria-hidden="true" tabindex="-1"></a>stats_flu_continent <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">continent =</span> <span class="fu">colnames</span>(flu_continent[,<span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(<span class="fu">colnames</span>(flu_continent))]),</span>
<span id="cb19-51"><a href="4_SQL.html#cb19-51" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">pvalue_shap =</span> <span class="fu">round</span>(<span class="fu">c</span>(<span class="fu">shapiro.test</span>(flu_continent<span class="sc">$</span>Oceania)<span class="sc">$</span>p.value,</span>
<span id="cb19-52"><a href="4_SQL.html#cb19-52" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(flu_continent<span class="sc">$</span>Europe)<span class="sc">$</span>p.value,</span>
<span id="cb19-53"><a href="4_SQL.html#cb19-53" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(flu_continent<span class="sc">$</span>Asia)<span class="sc">$</span>p.value,</span>
<span id="cb19-54"><a href="4_SQL.html#cb19-54" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(flu_continent<span class="sc">$</span>Americas)<span class="sc">$</span>p.value,</span>
<span id="cb19-55"><a href="4_SQL.html#cb19-55" aria-hidden="true" tabindex="-1"></a>                                                <span class="fu">shapiro.test</span>(flu_continent<span class="sc">$</span>Africa)<span class="sc">$</span>p.value), <span class="dv">4</span>))</span>
<span id="cb19-56"><a href="4_SQL.html#cb19-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-57"><a href="4_SQL.html#cb19-57" aria-hidden="true" tabindex="-1"></a><span class="do">## Normality results</span></span>
<span id="cb19-58"><a href="4_SQL.html#cb19-58" aria-hidden="true" tabindex="-1"></a>stats_dengue_country <span class="ot">&lt;-</span> stats_dengue_country <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">normal_dis =</span> pvalue_shap<span class="sc">&gt;</span><span class="fl">0.05</span>) </span>
<span id="cb19-59"><a href="4_SQL.html#cb19-59" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 out of 10 are normally distributed</span></span>
<span id="cb19-60"><a href="4_SQL.html#cb19-60" aria-hidden="true" tabindex="-1"></a>stats_flu_continent <span class="ot">&lt;-</span> stats_flu_continent <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">normal_dis =</span> pvalue_shap<span class="sc">&gt;</span><span class="fl">0.05</span>) </span>
<span id="cb19-61"><a href="4_SQL.html#cb19-61" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 out of 5 are normally distributed</span></span>
<span id="cb19-62"><a href="4_SQL.html#cb19-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-63"><a href="4_SQL.html#cb19-63" aria-hidden="true" tabindex="-1"></a><span class="co"># Levene test ----</span></span>
<span id="cb19-64"><a href="4_SQL.html#cb19-64" aria-hidden="true" tabindex="-1"></a><span class="fu">leveneTest</span>(cases_per_100000 <span class="sc">~</span> country, <span class="at">data =</span> gd_norm_country)[<span class="dv">1</span>,<span class="dv">3</span>] <span class="co"># P-value of .0000</span></span></code></pre></div>
<pre><code>## [1] 3.28782e-07</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="4_SQL.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leveneTest</span>(cases_per_100000 <span class="sc">~</span> continent, <span class="at">data =</span> gf_norm_continent)[<span class="dv">1</span>,<span class="dv">3</span>] <span class="co"># P-value of .0015</span></span></code></pre></div>
<pre><code>## [1] 0.001455027</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="4_SQL.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">## The variances are not equal</span></span>
<span id="cb23-2"><a href="4_SQL.html#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="4_SQL.html#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Kruskal Wallis test ----</span></span>
<span id="cb23-4"><a href="4_SQL.html#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(cases_per_100000 <span class="sc">~</span> country, <span class="at">data =</span> gd_norm_country) </span></code></pre></div>
<pre><code>## 
##  Kruskal-Wallis rank sum test
## 
## data:  cases_per_100000 by country
## Kruskal-Wallis chi-squared = 110.54, df = 9, p-value &lt; 2.2e-16</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="4_SQL.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="do">## P-value of .0000, there is statistically significant difference</span></span>
<span id="cb25-2"><a href="4_SQL.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kruskal.test</span>(cases_per_100000 <span class="sc">~</span> continent, <span class="at">data =</span> gf_norm_continent)</span></code></pre></div>
<pre><code>## 
##  Kruskal-Wallis rank sum test
## 
## data:  cases_per_100000 by continent
## Kruskal-Wallis chi-squared = 51.754, df = 4, p-value = 1.553e-10</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="4_SQL.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## P-value of .0000, there is statistically significant difference</span></span>
<span id="cb27-2"><a href="4_SQL.html#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="4_SQL.html#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Post-Hoc Dunn test ----</span></span>
<span id="cb27-4"><a href="4_SQL.html#cb27-4" aria-hidden="true" tabindex="-1"></a>dunn_dengue_country <span class="ot">&lt;-</span> <span class="fu">dunnTest</span>(cases_per_100000 <span class="sc">~</span> country, </span>
<span id="cb27-5"><a href="4_SQL.html#cb27-5" aria-hidden="true" tabindex="-1"></a>                                <span class="at">data =</span> gd_norm_country, <span class="at">method =</span> <span class="st">&quot;holm&quot;</span>)<span class="sc">$</span>res</span>
<span id="cb27-6"><a href="4_SQL.html#cb27-6" aria-hidden="true" tabindex="-1"></a>dunn_flu_continent <span class="ot">&lt;-</span> <span class="fu">dunnTest</span>(cases_per_100000 <span class="sc">~</span> continent, </span>
<span id="cb27-7"><a href="4_SQL.html#cb27-7" aria-hidden="true" tabindex="-1"></a>                               <span class="at">data =</span> gf_norm_continent, <span class="at">method =</span> <span class="st">&quot;holm&quot;</span>)<span class="sc">$</span>res</span>
<span id="cb27-8"><a href="4_SQL.html#cb27-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-9"><a href="4_SQL.html#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Significant differences ----</span></span>
<span id="cb27-10"><a href="4_SQL.html#cb27-10" aria-hidden="true" tabindex="-1"></a>dunn_dengue_country <span class="ot">&lt;-</span> dunn_dengue_country <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">different =</span> P.adj<span class="sc">&lt;</span><span class="fl">0.05</span>)</span>
<span id="cb27-11"><a href="4_SQL.html#cb27-11" aria-hidden="true" tabindex="-1"></a>dunn_flu_continent <span class="ot">&lt;-</span> dunn_flu_continent <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">different =</span> P.adj<span class="sc">&lt;</span><span class="fl">0.05</span>)</span></code></pre></div>
</details>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="4_SQL.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note the significant differences between countries/continents</span></span>
<span id="cb28-2"><a href="4_SQL.html#cb28-2" aria-hidden="true" tabindex="-1"></a>diff_dengue_country <span class="ot">&lt;-</span> dunn_dengue_country <span class="sc">%&gt;%</span> <span class="fu">filter</span>(different <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-3"><a href="4_SQL.html#cb28-3" aria-hidden="true" tabindex="-1"></a>diff_flu_continent <span class="ot">&lt;-</span> dunn_flu_continent <span class="sc">%&gt;%</span> <span class="fu">filter</span>(different <span class="sc">==</span> <span class="cn">TRUE</span>)</span>
<span id="cb28-4"><a href="4_SQL.html#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Note the comparable countries/continents</span></span>
<span id="cb28-5"><a href="4_SQL.html#cb28-5" aria-hidden="true" tabindex="-1"></a>nondiff_dengue_country <span class="ot">&lt;-</span> dunn_dengue_country <span class="sc">%&gt;%</span> <span class="fu">filter</span>(different <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb28-6"><a href="4_SQL.html#cb28-6" aria-hidden="true" tabindex="-1"></a>nondiff_flu_continent <span class="ot">&lt;-</span> dunn_flu_continent <span class="sc">%&gt;%</span> <span class="fu">filter</span>(different <span class="sc">==</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Seperate tables were made to show the combinations <i>with</i> significant difference and <i>without</i>. For the dengue data, 26 out of 45 combinations between the 10 countries were not significantly different in amount of dengue cases per week per 100.000 inhabitants. For the flu data, 3 out of 10 combinations between the 5 continents were not significantly different in amount of flu cases per week per 100.000 inhabitants.</p>
<hr />
</div>
<div id="visualizations" class="section level2" number="4.5">
<h2><span class="header-section-number">4.5</span> Visualizations</h2>
<p>We can also create varying visualizations to get an overall look of how the countries/continents compare to each other and how the numbers changed through the years.</p>
<div id="dengue-cases" class="section level3" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Dengue cases</h3>
<p>In figure 4.2 a scatterplot shows the average amount of weekly dengue cases per year with a different color for each country. Singapore has a clear higher number of cases for each year, except 2009. Singapore’s climate is a natural breeding ground for the dengue-carrying Aedes mosquitoes, which prefer a tropical climate according to <span class="citation">Khetarpal and Khanna (2016)</span>. By the end of 2016 27% of outbreak-associated dengue cases reported in literature had been in Singapore, second to China with 27.9% <span class="citation">(Guo et al. 2017)</span>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="4_SQL.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dengue scatterplot ----</span></span>
<span id="cb29-2"><a href="4_SQL.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Visualising the weekly dengue cases per country per year in a scatterplot</span></span>
<span id="cb29-3"><a href="4_SQL.html#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gd_norm_country, <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>cases_per_100000, </span>
<span id="cb29-4"><a href="4_SQL.html#cb29-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">group =</span> country, <span class="at">color =</span> country)) <span class="sc">+</span> </span>
<span id="cb29-5"><a href="4_SQL.html#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb29-6"><a href="4_SQL.html#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb29-7"><a href="4_SQL.html#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Dengue cases&quot;</span>,</span>
<span id="cb29-8"><a href="4_SQL.html#cb29-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Average dengue cases per week&quot;</span>,</span>
<span id="cb29-9"><a href="4_SQL.html#cb29-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb29-10"><a href="4_SQL.html#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">round</span>(<span class="fu">seq</span>(<span class="fu">min</span>(gd_norm_country<span class="sc">$</span>year), </span>
<span id="cb29-11"><a href="4_SQL.html#cb29-11" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">max</span>(gd_norm_country<span class="sc">$</span>year), </span>
<span id="cb29-12"><a href="4_SQL.html#cb29-12" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">by =</span> <span class="dv">1</span>),<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb29-13"><a href="4_SQL.html#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="bookdown_site_files/figure-html/dengue%20visualization-1.png" width="672" /></p>
<p><em>Figure 4.2. Scatterplot to show the average amount of weekly dengue cases per 100.000 inhabitants per year per country.</em></p>
</div>
<div id="flu-cases" class="section level3" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> Flu cases</h3>
<p>For the flu cases we will be comparing continents instead of countries, first comparing the average amount of weekly flu cases per 100.000 inhabitants per continent per year. In figure 4.3 a bar graph shows the average per continent with the standard deviation as error bars. Africa has a clear higher average of 5.2 per 100.000 inhabitants per week. In less tropical continents, like Europe and North America, most flu cases occur in the colder months. In more tropical continents, like Africa, they occur all throughout the year <span class="citation">(Yazdanbakhsh and Kremsner 2009)</span>. Multiple factors like, access to health care, poor nutrition, chronic infections and indoor air pollution could contribute to the increase in flu cases <span class="citation">(Ortiz et al. 2012)</span>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="4_SQL.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Flu bargraph ----</span></span>
<span id="cb30-2"><a href="4_SQL.html#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Make a bar graph with the relative average population and weekly flu cases</span></span>
<span id="cb30-3"><a href="4_SQL.html#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gf_summ, <span class="fu">aes</span>(<span class="at">x=</span><span class="fu">reorder</span>(continent, <span class="sc">-</span>avg_cases_per_100000), </span>
<span id="cb30-4"><a href="4_SQL.html#cb30-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">y=</span>avg_cases_per_100000, <span class="at">fill=</span>continent)) <span class="sc">+</span></span>
<span id="cb30-5"><a href="4_SQL.html#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat=</span><span class="st">&quot;identity&quot;</span>, <span class="at">position=</span><span class="fu">position_dodge</span>(), <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb30-6"><a href="4_SQL.html#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>avg_cases_per_100000<span class="sc">-</span>sd_cases_per_100000, <span class="at">ymax=</span>avg_cases_per_100000<span class="sc">+</span>sd_cases_per_100000), <span class="at">width=</span>.<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb30-7"><a href="4_SQL.html#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Flu cases per continent&quot;</span>,</span>
<span id="cb30-8"><a href="4_SQL.html#cb30-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Flu cases per week per 100.000 inhabitants&quot;</span>,</span>
<span id="cb30-9"><a href="4_SQL.html#cb30-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb30-10"><a href="4_SQL.html#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="bookdown_site_files/figure-html/flu%20bar%20visualization-1.png" width="672" /></p>
<p><em>Figure 4.3. The average amount of weekly flu cases per 100.000 inhabitants per continent from approx. 2003 to 2015.</em></p>
<p>For further analysis a scatterplot has been made, shown in figure 4.4. One points which stands out for all continents except Oceania is the increase in 2009, only to go back down again in 2010. In 2009 there was a pandemic called the Swine Flu which might be the cause of this sudden jump in flu cases for all continents <span class="citation">(Akin and Gözel 2020)</span>. This also explains why Oceania was affected less, as it is separated from other continents by oceans.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="4_SQL.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Flu scatterplot ----</span></span>
<span id="cb31-2"><a href="4_SQL.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Visualising the weekly dengue cases per continent per year in a scatterplot</span></span>
<span id="cb31-3"><a href="4_SQL.html#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gf_norm_continent, <span class="fu">aes</span>(<span class="at">x=</span>year, <span class="at">y=</span>cases_per_100000, </span>
<span id="cb31-4"><a href="4_SQL.html#cb31-4" aria-hidden="true" tabindex="-1"></a>                              <span class="at">group =</span> continent, <span class="at">color =</span> continent)) <span class="sc">+</span> </span>
<span id="cb31-5"><a href="4_SQL.html#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb31-6"><a href="4_SQL.html#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb31-7"><a href="4_SQL.html#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Weekly flu cases across the world&quot;</span>,</span>
<span id="cb31-8"><a href="4_SQL.html#cb31-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Weekly flu cases&quot;</span>,</span>
<span id="cb31-9"><a href="4_SQL.html#cb31-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb31-10"><a href="4_SQL.html#cb31-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">round</span>(<span class="fu">seq</span>(<span class="fu">min</span>(gf_norm_continent<span class="sc">$</span>year), </span>
<span id="cb31-11"><a href="4_SQL.html#cb31-11" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">max</span>(gf_norm_continent<span class="sc">$</span>year), <span class="at">by =</span> <span class="dv">1</span>),<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb31-12"><a href="4_SQL.html#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="bookdown_site_files/figure-html/flu%20scatter%20visualization-1.png" width="672" /></p>
<p><em>Figure 4.4. Scatterplot to show the average amount of weekly flu cases per year per continent.</em></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="3_3D_visualizations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="5_package_portrobbo.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/mirthhe/mirthhe.github.io/edit/master/4_SQL.Rmd",
"text": "Share your feedback"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown_site.pdf", "bookdown_site.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
